<h1>Manage Your Islands</h1>

<% if @my_islands.any?%>
  <h2>Your islands</h2>
    <ul>
      <% @my_islands.each do |island| %>
        <li>
          <h3><%= island.name %></h3>
          <p>Description: <%= island.description %></p>
          <p>Price: $<%= island.price %> per day</p>
          <p>Location: <%= island.location %></p>
          <p>Rating: <%= island.average_rating %>/5</p>
          <p>Capacity: <%= island.capacity %></p>
          <% if island.photo.attached? %>
            <%= cl_image_tag island.photo.key, height: 300, width: 400, crop: :fill %>
          <% else %>
            <div style="width: 400px; height: 300px; border: 1px dashed #ccc; display: flex; align-items: center; justify-content: center; background-color: #f9f9f9;">
            <span style="color: #888; font-size: 14px;">No Image Available</span>
            </div>
          <% end %>
          <%= button_to "Delete", island_path(island), method: :delete, data: { confirm: "Are you sure you want to delete this island?"}, class: "btn btn-danger"%>
        </li>
      <% end %>
    </ul>
<% else %>
  <p>You have not created any islands yet.</p>
<% end %>





<h3>Create a New Island</h3>

<%= simple_form_for(@island) do |f| %>
  <%= f.input :name %>
  <%= f.input :description %>
  <%= f.input :price %>
  <%= f.input :capacity %>
  <%= f.input :location, input_html: {data: {location_autocomplete_target: "location"}, class: "d-none"},
      wrapper_html: {data: {controller: "location-autocomplete", location_autocomplete_api_key_value: ENV["MAPBOX_API_KEY"]}} %>
  <%= f.input :photo, as: :file %>
  <%= f.submit %>
<% end %>
